<script>
const user = JSON.parse(localStorage.getItem('user'));
const workshops = JSON.parse(localStorage.getItem('workshops')) || [];

const myWorkshops = workshops.filter(w => w.trainer === user.name);
const div = document.getElementById('trainerWorkshops');

if (myWorkshops.length === 0) {
  div.innerHTML = "<p>No workshops assigned yet.</p>";
} else {
  myWorkshops.forEach(w => {
    const box = document.createElement('div');
    box.className = 'workshop';
    box.innerHTML = `
      <h3>${w.title}</h3>
      <p><strong>Date:</strong> ${w.date}</p>
      <p><strong>Time:</strong> ${w.time}</p>
      <p><strong>Location:</strong> ${w.location}</p>
      <button onclick="viewAttendance('${w.id}')">View Attendance</button>
      <button onclick="viewFeedback('${w.id}')">View Feedback</button>
    `;
    div.appendChild(box);
  });
}

function viewAttendance(workshopId) {
  localStorage.setItem('currentWorkshop', workshopId);
  window.location.href = 'view_attendance.html';
}

function viewFeedback(workshopId) {
  localStorage.setItem('currentWorkshop', workshopId);
  window.location.href = 'trainer_feedback.html';
}

function logout() {
  localStorage.clear();
  window.location.href = 'login.html';
}
</script>
